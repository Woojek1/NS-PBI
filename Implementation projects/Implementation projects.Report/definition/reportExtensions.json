{
  "$schema": "https://developer.microsoft.com/json-schemas/fabric/item/report/definition/reportExtension/1.0.0/schema.json",
  "name": "extension",
  "entities": [
    {
      "name": "CAPEX Bud Measures",
      "measures": [
        {
          "name": "Budget realisation",
          "dataType": "Double",
          "expression": "\nDIVIDE(\n    'CAPEX Measures'[Amount PLN],\n    'CAPEX Bud Measures'[Budget PLN],\n    \"n/d\"\n)",
          "formatString": "0.00\\ %;-0.00\\ %;0.00\\ %",
          "references": {
            "measures": [
              {
                "entity": "CAPEX Measures",
                "name": "Amount PLN"
              },
              {
                "entity": "CAPEX Bud Measures",
                "name": "Budget PLN"
              }
            ]
          }
        },
        {
          "name": "Budzet PLN (total)",
          "dataType": "Double",
          "expression": "\nCALCULATE(\n    SUM('CAPEX Bud Measures'[budc_pln]),\n    ALL('Date')\n)",
          "formatString": "0"
        },
        {
          "name": "Title (current year spendings)",
          "dataType": "Double",
          "expression": "\n\"Wydatki \" & \nYEAR(\n    TODAY()\n)"
        },
        {
          "name": "Selected project",
          "dataType": "Double",
          "expression": "\nVAR _project_name = MAX(Project[Project])\nRETURN\n\nIF(\n    HASONEVALUE(Project[Project]),\n    _project_name,\n    \"\"\n)"
        },
        {
          "name": "Title (current year budget)",
          "dataType": "Double",
          "expression": "\n\"Budżet \" & \nYEAR(\n    TODAY()\n)\n",
          "formatString": "General Number"
        },
        {
          "name": "Title (current year budget realization)",
          "dataType": "Double",
          "expression": "\n\"Realizacja budżetu  \" & \nYEAR(\n    TODAY()\n)\n",
          "formatString": "General Number"
        }
      ]
    },
    {
      "name": "Prj Bud Total Measures",
      "measures": [
        {
          "name": "Open project count",
          "dataType": "Double",
          "expression": "\nCOUNTROWS (\n    DISTINCT(\n        FILTER(\n            VALUES('Project'[Project]),\n            LEFT ('Project'[Project], 3) <> \"(X)\"\n        )\n    )\n)",
          "formatString": "0"
        },
        {
          "name": "Project count",
          "dataType": "Double",
          "expression": "\nCOUNTROWS(\n    values(\n        Project[Project Code]\n    )\n)",
          "formatString": "0"
        }
      ]
    }
  ]
}